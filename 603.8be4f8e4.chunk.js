"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[603],{603:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var a=r(294),o=r(953),l=r(767),n=r(730),i={board:{cols:3,rows:8,voidCols:[0,2],voidRows:[4,5],tileSize:[1,.75,1],pieceRadiusRatio:.75,pieceHeightRatio:.2,pieceTextureRatio:2,pieceColors:["#86868f","#dbd8bd"],color:"#bab8a1"},camera:{position:[0,7,7]}};function c(){return a.createElement(a.Fragment,null,a.createElement(l.c,{makeDefault:!0,position:i.camera.position}),a.createElement(n.z,{makeDefault:!0}))}var d=r(264),m={environment:r.p+"environment.bec864da.hdr",piecePlayer1:r.p+"piece-player-1.6c9bfd25.png",piecePlayer2:r.p+"piece-player-2.65ab82ae.png",tile1:r.p+"tile-1.e7ac7a10.png",tile2:r.p+"tile-2.0726d6cd.png",tile3:r.p+"tile-3.a5820afb.png",tile4:r.p+"tile-4.5f2a69ef.png",tile5:r.p+"tile-5.d16fe08b.png"};function s(){return a.createElement(a.Fragment,null,a.createElement("ambientLight",null),a.createElement(d.qA,{files:m.environment}))}var p=r(477),u=r(769),b=r(734);function h(e){let{piece:t}=e;const r=(0,b.z)((e=>e.gl)),o=(0,u.m)([m.piecePlayer1,m.piecePlayer2]);a.useMemo((()=>{o.forEach((e=>{e.anisotropy=r.capabilities.getMaxAnisotropy()}))}),[o,r]);const l=a.useMemo((()=>{const e=.5*i.board.tileSize[0]*i.board.pieceRadiusRatio;return{radius:e,height:i.board.tileSize[1]*i.board.pieceHeightRatio,textureSize:e*i.board.pieceTextureRatio}}),[]);return a.createElement(a.Fragment,null,a.createElement("mesh",null,a.createElement("cylinderGeometry",{args:[l.radius,l.radius,l.height,32,32]}),a.createElement("meshStandardMaterial",{color:i.board.pieceColors[t.playerIndex]})),a.createElement("group",{"position-y":l.height/2},a.createElement("mesh",{renderOrder:1,"rotation-x":p.MathUtils.degToRad(-90)},a.createElement("planeGeometry",{args:[l.textureSize,l.textureSize]}),a.createElement("meshStandardMaterial",{depthWrite:!1,depthTest:!1,transparent:!0,map:o[t.playerIndex]}))))}function E(){const e=(0,u.m)([m.tile1,m.tile2,m.tile3,m.tile4,m.tile5]),t=a.useMemo((()=>Array.from(Array(i.board.cols)).map(((e,t)=>Array.from(Array(i.board.rows)).map(((e,r)=>{const a=[{row:0,col:0},{row:0,col:2}];return{col:t,row:r,void:i.board.voidCols.includes(t)&&i.board.voidRows.includes(r),textureIndex:function(e,t){return void 0!==a.find((r=>r.row===e&&r.col===t))?3:0}(r,t)}}))))),[]),[r,o]=a.useState([]);return a.useEffect((()=>{const e=[0,1];o(function(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}(t.flat().filter((e=>!e.void))).slice(0,5).map(((t,r)=>({playerIndex:e[r%2],col:t.col,row:t.row}))))}),[t]),a.createElement("group",{"position-x":i.board.tileSize[0]*(-(i.board.rows-1)/2),"position-z":i.board.tileSize[0]*((i.board.cols-1)/2)},a.createElement("group",{"rotation-y":p.MathUtils.degToRad(90)},t.map(((t,o)=>a.createElement("group",{key:o,"position-x":i.board.tileSize[0]*o},t.map(((t,o)=>{if(t.void)return a.createElement(a.Fragment,{key:o});const l=r.find((e=>e.col==t.col&&e.row===t.row));return a.createElement("group",{key:o,"position-z":t.row*i.board.tileSize[0]},a.createElement("mesh",null,a.createElement("boxGeometry",{args:i.board.tileSize}),a.createElement("meshStandardMaterial",{color:i.board.color,attach:"material-0"}),a.createElement("meshStandardMaterial",{color:i.board.color,attach:"material-1"}),a.createElement("meshStandardMaterial",{map:e[t.textureIndex],attach:"material-2"}),a.createElement("meshStandardMaterial",{color:i.board.color,attach:"material-3"}),a.createElement("meshStandardMaterial",{color:i.board.color,attach:"material-4"}),a.createElement("meshStandardMaterial",{color:i.board.color,attach:"material-5"})),void 0!==l&&a.createElement("group",{"position-y":i.board.tileSize[1]/2+i.board.tileSize[1]*i.board.pieceHeightRatio/2},a.createElement(h,{piece:l})))})))))))}function f(){return a.createElement(o.Xz,{flat:!0,linear:!0,legacy:!0},a.createElement(s,null),a.createElement(c,null),a.createElement(a.Suspense,{fallback:a.createElement(a.Fragment,null)},a.createElement(E,null)))}function g(){return a.createElement("main",null,a.createElement(f,null))}}}]);
//# sourceMappingURL=603.8be4f8e4.chunk.js.map