"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[754],{754:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=a(294),o=a(953),i=a(767),l=a(730),n={board:{cols:3,rows:8,voidCols:[0,2],voidRows:[4,5],tileSize:[1,.75,1],pieceRadiusRatio:.75,pieceHeightRatio:.2,pieceTextureRatio:2,pieceColors:["#86868f","#dbd8bd"],color:"#bab8a1"},camera:{position:[0,7,7]}};function c(){return r.createElement(r.Fragment,null,r.createElement(i.c,{makeDefault:!0,position:n.camera.position}),r.createElement(l.z,{makeDefault:!0}))}var d=a(264),s={environment:a.p+"environment.bec864da.hdr",piecePlayer1:a.p+"piece-player-1.6c9bfd25.png",piecePlayer2:a.p+"piece-player-2.65ab82ae.png",tileRosetta:a.p+"tile-rosetta.5f2a69ef.png",tileEyes:a.p+"tile-eyes.0726d6cd.png",tileGrid:a.p+"tile-grid.e7ac7a10.png",tileDots:a.p+"tile-dots.d16fe08b.png",tileMaze:a.p+"tile-maze.a5820afb.png",boardSide:a.p+"board-side.fb3ec2fa.png"};function m(){return r.createElement(r.Fragment,null,r.createElement("ambientLight",null),r.createElement(d.qA,{files:s.environment}))}var p=a(477),u=a(734),b=a(769);let g=function(e){return e.rosetta="rosetta",e.eyes="eyes",e.grid="grid",e.dots="dots",e.maze="maze",e.void="void",e}({});function E(e){let{piece:t}=e;const a=(0,u.z)((e=>e.gl)),o=(0,b.m)([s.piecePlayer1,s.piecePlayer2]);r.useMemo((()=>{o.forEach((e=>{e.anisotropy=a.capabilities.getMaxAnisotropy()}))}),[o,a]);const i=r.useMemo((()=>{const e=.5*n.board.tileSize[0]*n.board.pieceRadiusRatio;return{radius:e,height:n.board.tileSize[1]*n.board.pieceHeightRatio,textureSize:e*n.board.pieceTextureRatio}}),[]);return r.createElement(r.Fragment,null,r.createElement("mesh",null,r.createElement("cylinderGeometry",{args:[i.radius,i.radius,i.height,32,32]}),r.createElement("meshStandardMaterial",{color:n.board.pieceColors[t.playerIndex]})),r.createElement("group",{"position-y":i.height/2},r.createElement("mesh",{renderOrder:1,"rotation-x":p.MathUtils.degToRad(-90)},r.createElement("planeGeometry",{args:[i.textureSize,i.textureSize]}),r.createElement("meshStandardMaterial",{depthWrite:!1,depthTest:!1,transparent:!0,map:o[t.playerIndex]}))))}function h(){const e=(0,b.m)([s.tileRosetta,s.tileEyes,s.tileGrid,s.tileDots,s.tileMaze]),t=(0,u.z)((e=>e.gl));r.useMemo((()=>{e.forEach((e=>{e.anisotropy=t.capabilities.getMaxAnisotropy()}))}),[e,t]);const a=r.useMemo((()=>{const e=[[g.rosetta,g.eyes,g.dots,g.eyes,g.void,g.void,g.rosetta,g.maze],[g.maze,g.dots,g.grid,g.rosetta,g.dots,g.grid,g.eyes,g.dots],[g.rosetta,g.eyes,g.dots,g.eyes,g.void,g.void,g.rosetta,g.maze]];return Array.from(Array(n.board.cols)).map(((t,a)=>Array.from(Array(n.board.rows)).map(((t,r)=>({col:a,row:r,void:n.board.voidCols.includes(a)&&n.board.voidRows.includes(r),type:e[a][r]})))))}),[]),[o,i]=r.useState([]);return r.useEffect((()=>{const e=[0,1];i(function(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}(a.flat().filter((e=>!e.void))).slice(0,5).map(((t,a)=>({...t,playerIndex:e[a%2],col:t.col,row:t.row}))))}),[a]),r.createElement("group",{"position-x":n.board.tileSize[0]*(-(n.board.rows-1)/2),"position-z":n.board.tileSize[0]*((n.board.cols-1)/2)},r.createElement("group",{"rotation-y":p.MathUtils.degToRad(90)},a.map(((t,a)=>r.createElement("group",{key:a,"position-x":n.board.tileSize[0]*a},t.map(((t,a)=>{if(t.void)return r.createElement(r.Fragment,{key:a});const i=o.find((e=>e.col==t.col&&e.row===t.row));return r.createElement("group",{key:a,"position-z":n.board.tileSize[0]*t.row},r.createElement("mesh",null,r.createElement("boxGeometry",{args:n.board.tileSize}),r.createElement("meshStandardMaterial",{color:n.board.color,attach:"material-0"}),r.createElement("meshStandardMaterial",{color:n.board.color,attach:"material-1"}),r.createElement("meshStandardMaterial",{map:e[(l=t.type,Object.values(g).indexOf(l))],attach:"material-2"}),r.createElement("meshStandardMaterial",{color:n.board.color,attach:"material-3"}),r.createElement("meshStandardMaterial",{color:n.board.color,attach:"material-4"}),r.createElement("meshStandardMaterial",{color:n.board.color,attach:"material-5"})),void 0!==i&&r.createElement("group",{"position-y":n.board.tileSize[1]/2+n.board.tileSize[1]*n.board.pieceHeightRatio/2},r.createElement(E,{piece:i})));var l})))))))}function y(){return r.createElement(o.Xz,{flat:!0,linear:!0,legacy:!0},r.createElement(m,null),r.createElement(c,null),r.createElement(r.Suspense,{fallback:r.createElement(r.Fragment,null)},r.createElement(h,null)))}function f(){return r.createElement("main",null,r.createElement(y,null))}}}]);
//# sourceMappingURL=754.762fd9c2.chunk.js.map