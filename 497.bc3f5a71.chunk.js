"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[497],{497:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=r(294),o=r(953),n=r(767),i=r(730),l={board:{cols:3,rows:8,voidCols:[0,2],voidRows:[4,5],tileSize:[1,.75,1],pieceRadiusRatio:.75,pieceHeightRatio:.2,pieceTextureRatio:1.5,pieceColors:["#86868f","#dbd8bd"],color:"#bab8a1"},camera:{position:[0,7,7]}};function c(){return a.createElement(a.Fragment,null,a.createElement(n.c,{makeDefault:!0,position:l.camera.position}),a.createElement(i.z,{makeDefault:!0}))}var m=r(264),s={environment:r.p+"environment.bec864da.hdr",piecePlayer1:r.p+"piece-player-1.17b38c41.png",piecePlayer2:r.p+"piece-player-2.f80f84fb.png"};function d(){return a.createElement(a.Fragment,null,a.createElement("ambientLight",null),a.createElement(m.qA,{files:s.environment}))}var u=r(477),p=r(734),b=r(769);function E(e){let{piece:t}=e;const r=(0,p.z)((e=>e.gl)),o=(0,b.m)([s.piecePlayer1,s.piecePlayer2]);a.useMemo((()=>{o.forEach((e=>{e.anisotropy=r.capabilities.getMaxAnisotropy()}))}),[o,r]);const n=a.useMemo((()=>{const e=.5*l.board.tileSize[0]*l.board.pieceRadiusRatio;return{radius:e,height:l.board.tileSize[1]*l.board.pieceHeightRatio,textureSize:e*l.board.pieceTextureRatio}}),[]);return a.createElement(a.Fragment,null,a.createElement("mesh",null,a.createElement("cylinderGeometry",{args:[n.radius,n.radius,n.height,32,32]}),a.createElement("meshStandardMaterial",{color:l.board.pieceColors[t.playerIndex]})),a.createElement("group",{"position-y":n.height/2},a.createElement("mesh",{renderOrder:1,"rotation-x":u.MathUtils.degToRad(-90)},a.createElement("planeGeometry",{args:[n.textureSize,n.textureSize]}),a.createElement("meshStandardMaterial",{depthWrite:!1,depthTest:!1,transparent:!0,map:o[t.playerIndex]}))))}function f(){const e=a.useMemo((()=>Array.from(Array(l.board.cols)).map(((e,t)=>Array.from(Array(l.board.rows)).map(((e,r)=>({col:t,row:r,void:l.board.voidCols.includes(t)&&l.board.voidRows.includes(r)})))))),[]),[t,r]=a.useState([]);return a.useEffect((()=>{const t=[0,1];r(function(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}(e.flat().filter((e=>!e.void))).slice(0,5).map(((e,r)=>({playerIndex:t[r%2],col:e.col,row:e.row}))))}),[e]),a.createElement("group",{"position-x":l.board.tileSize[0]*(-(l.board.rows-1)/2),"position-z":l.board.tileSize[0]*((l.board.cols-1)/2)},a.createElement("group",{"rotation-y":u.MathUtils.degToRad(90)},e.map(((e,r)=>a.createElement("group",{key:r,"position-x":l.board.tileSize[0]*r},e.map(((e,r)=>{if(e.void)return a.createElement(a.Fragment,{key:r});const o=t.find((t=>t.col==e.col&&t.row===e.row));return a.createElement("group",{key:r,"position-z":e.row*l.board.tileSize[0]},a.createElement("mesh",null,a.createElement("boxGeometry",{args:l.board.tileSize}),a.createElement("meshStandardMaterial",{color:l.board.color})),void 0!==o&&a.createElement("group",{"position-y":l.board.tileSize[1]/2+l.board.tileSize[1]*l.board.pieceHeightRatio/2},a.createElement(E,{piece:o})))})))))))}function g(){return a.createElement(o.Xz,{flat:!0,linear:!0,legacy:!0},a.createElement(d,null),a.createElement(c,null),a.createElement(a.Suspense,{fallback:a.createElement(a.Fragment,null)},a.createElement(f,null)))}function h(){return a.createElement("main",null,a.createElement(g,null))}}}]);
//# sourceMappingURL=497.bc3f5a71.chunk.js.map